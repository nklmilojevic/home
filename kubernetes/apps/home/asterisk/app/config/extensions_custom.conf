; Full extensions.conf replacement for intercom support

[general]
static=yes

[default]
include => parkedcalls

; Door intercom - must be before catch-all
exten => 8000,1,NoOp(Calling Door Intercom)
 same => n,Dial(PJSIP/640000033c9b,60)
 same => n,Hangup()

; Park extensions
exten => 444,1,Park(,s)
exten => 555,1,ParkedCall(default,701)

; Catch-all for other extensions
exten => _X!,1,Dial(${PJSIP_DIAL_CONTACTS(${EXTEN})})

[parkedcallstimeout]
exten => s,1,Hangup()

[from-intercom]
; When intercom calls, ring all auto-generated extensions
exten => _X.,1,NoOp(Incoming call from Door Intercom to ${EXTEN})
 same => n,Set(CALLERID(name)=Door Intercom)
 same => n,Set(CALLERID(num)=8000)
 same => n,Dial(PJSIP/100&PJSIP/101&PJSIP/102&PJSIP/103,60)
 same => n,Hangup()
